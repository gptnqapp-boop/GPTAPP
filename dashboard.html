<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Dashboard | Learn with GPT</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
body { margin: 0; font-family: Arial, sans-serif; background: #f4f6f8; }

/* HEADER */
.header {
    background: #0B3D91;
    color: white;
    padding: 15px 15px 25px;
    border-bottom-left-radius: 22px;
    border-bottom-right-radius: 22px;
    position: relative;
    text-align: center;
}
.hamburger { position: absolute; left: 15px; top: 18px; font-size: 22px; cursor: pointer; }
.logout { position: absolute; right: 15px; top: 18px; font-size: 20px; cursor: pointer; }
.title { font-size: 20px; font-weight: bold; }
.welcome { margin-top: 6px; font-size: 15px; opacity: 0.9; }

/* SIDE MENU */
.menu {
    position: fixed;
    top: 0;
    left: -260px;
    width: 260px;
    height: 100%;
    background: #fff;
    box-shadow: 2px 0 6px rgba(0,0,0,0.2);
    padding-top: 20px;
    transition: 0.3s;
    z-index: 1000;
}
.menu-top { text-align: center; padding: 20px 0; border-bottom: 1px solid #e3ebf5; }
.menu-logo { width: 100px; height: auto; border-radius: 50%; }
.menu a { display: block; padding: 15px 20px; text-decoration: none; color: #333; font-size: 16px; }
.menu a i { margin-right: 10px; color: #0B3D91; }
.menu a:hover { background: #e3ebf5; }

/* GRID */
.grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 20px; }
.card {
    background: white; padding: 30px 20px; text-align: center; border-radius: 14px; cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.08);
}
.card i { font-size: 30px; color: #0B3D91; margin-bottom: 10px; }
.card span { display: block; font-size: 16px; font-weight: 500; }
.card:hover { background: #eef3fa; }
</style>
</head>
<body>

<!-- SIDE MENU -->
<div id="sideMenu" class="menu">
    <div class="menu-top">
        <img src="assets/logo.png" alt="Logo" class="menu-logo">
    </div>
    <a href="contact.html"><i class="fa-solid fa-phone"></i>Contact Us</a>
    <a href="motivation.html"><i class="fa-solid fa-lightbulb"></i>Motivation</a>
    <a href="calculator.html"><i class="fa-solid fa-calculator"></i>Calculator</a>
</div>

<!-- HEADER -->
<div class="header">
    <div class="hamburger" onclick="toggleMenu()"><i class="fa-solid fa-bars"></i></div>
    <div class="title">Learn with GPT</div>
    <div class="welcome">Welcome, <strong id="username"></strong></div>
    <div class="logout" onclick="logout()"><i class="fa-solid fa-power-off"></i></div>
</div>

<!-- MAIN GRID -->
<div class="grid">
    <div class="card" onclick="location.href='videos.html'"><i class="fa-solid fa-play"></i><span>Videos</span></div>
    <div class="card" onclick="location.href='documents.html'"><i class="fa-solid fa-folder-open"></i><span>Documents</span></div>
    <div class="card" onclick="location.href='quiz.html'"><i class="fa-solid fa-circle-question"></i><span>Quiz</span></div>
    <div class="card" onclick="location.href='past-papers.html'"><i class="fa-solid fa-box-archive"></i><span>Past Papers</span></div>
</div>

<script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_PROJECT_ID.appspot.com",
      messagingSenderId: "YOUR_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const sideMenu = document.getElementById("sideMenu");
    const hamburger = document.querySelector('.hamburger');

    // Toggle menu
    function toggleMenu() {
        sideMenu.style.left = (sideMenu.style.left === "0px") ? "-260px" : "0px";
    }

    // Close menu on outside click
    document.addEventListener('click', function(event) {
        const isClickInside = sideMenu.contains(event.target) || hamburger.contains(event.target);
        if (!isClickInside) sideMenu.style.left = "-260px";
    });

    // Close menu on link click
    const links = sideMenu.querySelectorAll('a');
    links.forEach(link => { link.addEventListener('click', () => { sideMenu.style.left = "-260px"; }); });

    // Logout
    function logout() { auth.signOut().then(() => window.location.href = "login.html"); }

    // Check auth state
    auth.onAuthStateChanged(user => {
        if(user){
            // Fetch user name from Firestore
            db.collection('users').doc(user.uid).get().then(doc => {
                if(doc.exists){
                    document.getElementById("username").innerText = doc.data().name;
                }
            });
        } else {
            // No user logged in â†’ redirect to login
            window.location.href = "login.html";
        }
    });
</script>

</body>
</html>